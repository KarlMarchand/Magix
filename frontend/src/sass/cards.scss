:root {
	--card-height: 20vw;
	--card-text-size: calc(var(--card-height) * 0.02);
	--card-width: calc(var(--card-height) / 1.5);
}

.selectedCard:not(.opponent) {
	--borderWidth: 3px;
	position: relative;
	border-radius: inherit;

	&:after {
		content: "";
		position: absolute;
		border-radius: inherit;
		top: calc(-1 * var(--borderWidth));
		left: calc(-1 * var(--borderWidth));
		height: calc(100% + var(--borderWidth) * 2);
		width: calc(100% + var(--borderWidth) * 2);
		background: linear-gradient(60deg, #ef4e7b, #a166ab, #5073b8, #1098ad, #07b39b, #6fba82);
		z-index: -1;
		animation: animatedgradient 3s ease alternate infinite;
		background-size: 300% 300%;
	}
}

.card {
	width: var(--card-width);
	height: var(--card-height);
	padding: 3px;
	background-color: transparent;
	color: white;
	font-size: calc(2 * var(--card-text-size));
	justify-content: center;
	perspective: 1000px;
	border-radius: 5%;
	user-select: none;

	.card-inner {
		position: relative;
		width: 100%;
		height: 100%;
		border-radius: inherit;
		transform-style: preserve-3d;

		> div {
			height: 100%;
			width: 100%;
			position: absolute;
			backface-visibility: hidden;
			display: flex;
			justify-content: center;
			background-repeat: no-repeat;
			background-position-x: center;
			background-color: #111111;
			border-radius: inherit;
		}
	}
}

.hand.opponent .card {
	position: relative;
	animation: drawOpp 1s ease-in-out forwards;

	@keyframes drawOpp {
		from {
			transform: translateY(50vh);
		}
	}
}

.self.handCard.card {
	position: relative;
	animation: drawSelf 1s ease-in-out forwards;

	@keyframes drawSelf {
		0% {
			transform: translateY(50vh) rotateY(180deg);
		}

		75% {
			transform: translateY(12.5vh) rotateY(180deg);
		}
	}
}

.field.self .card {
	position: relative;
	animation: playSelf 1s ease-in-out forwards;

	@keyframes playSelf {
		from {
			transform: translateY(20vh);
		}
	}
}

.field.opponent .card {
	position: relative;
	animation: playOpp 1s ease-in-out forwards;

	@keyframes playOpp {
		from {
			transform: translateY(-20vh);
		}
	}
}

.card-back {
	background-size: cover;
	background-position-y: center;
	transform: rotateY(180deg);
}

.card-front {
	--shadow: calc(var(--card-height) * 0.03);
	box-shadow: inset 0px 0px 0px var(--shadow) #111111;
	background-size: auto 60%;
	background-position-y: 30%;

	.card-name,
	.card-description {
		background: #1d1f20;
		border-color: var(--color-scheme);
		border-style: solid;
		position: absolute;

		p {
			text-transform: capitalize;
		}
	}

	.card-name {
		border-radius: 20px / 100px;
		border-width: calc(var(--shadow) * 0.25);
		width: 95%;
		height: 10%;
		top: var(--shadow);
		align-self: center;
		display: flex;
		align-items: center;
		justify-content: center;
		font-weight: bold;
	}

	.card-description {
		border-radius: 20px / 100px;
		border-width: calc(var(--shadow) * 0.25) calc(var(--shadow) * 0.5) calc(var(--shadow) * 0.25)
			calc(var(--shadow) * 3);
		width: 95%;
		height: 25%;
		bottom: var(--shadow);
		left: calc(var(--shadow) / 2);
		padding: 0px 3%;
	}
}

.bullet-shape {
	position: absolute;
	width: 15%;
	height: 7%;
	border: solid 1px gray;
	border-left: transparent;
	background: linear-gradient(0.25turn, rgb(11, 11, 11) 50%, gray);
	border-radius: 0px 20px 20px 0px / 100px;
	left: 0;
	display: flex;
	justify-content: center;

	p {
		align-self: center;
		font-weight: bold;
		font-size: calc(2.5 * var(--card-text-size));
	}

	&.cost {
		top: 4.5%;
		background: #111111;
	}

	&.attack {
		top: 75%;
	}

	&.defense {
		top: 85%;
	}

	&.reverse {
		background: linear-gradient(0.25turn, rgb(11, 11, 11) 10%, gray);
		transform: rotateY(180deg);
		left: 85%;
		top: 75%;

		& + & {
			top: 85%;
		}
	}
}

.faction {
	transform: rotateY(180deg);
	top: 4.5%;
	left: 90%;
	width: 10%;
	border-right: transparent;
	background: linear-gradient(0.25turn, rgb(11, 11, 11) 20%, gray);

	&::after {
		content: "";
		position: relative;
		display: inline-block;
		top: -1px;
		left: 50%;
		border-radius: 100%;
		height: 100%;
		width: 100%;
		border: solid 1px gray;
		background-image: var(--faction-symbol);
		background-color: white;
		background-size: cover;
		background-repeat: no-repeat;
		background-position: center;
	}
}

.flip:not(.selectedCard) {
	.card-inner {
		transition: transform 0.8s;
	}

	&:hover .card-inner {
		transform: rotateY(180deg);
	}
}

.flipping {
	animation: flipping 2s forwards;
}

.flipped {
	.card-inner {
		transform: rotateY(180deg);
	}
}

.sleeping {
	filter: grayscale(100%);
}

.field .taunt {
	position: absolute;
	pointer-events: none;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	mask: url(../../static/img/shield.png) center/contain no-repeat;
	background: var(--shield-blue);
	animation: opens 2s forwards;

	@keyframes opens {
		50% {
			transform: scaleX(2.5) scaleY(3);
		}

		100% {
			transform: scaleX(2) scaleY(2.5);
		}
	}
}

.field .stealth {
	&::after {
		content: "";
		position: relative;
		display: inline-block;
		top: 0;
		left: 0;
		height: 100%;
		width: 100%;
		background-image: url(../../static/img/fog.png);
		background-repeat: repeat-x;
		background-size: cover;
		background-position: center;
		animation: moving 60s linear infinite;
	}

	@keyframes moving {
		0% {
			background-position: -0%;
		}

		100% {
			background-position: -400%;
		}
	}
}

.empire {
	--color-scheme: rgb(51, 51, 77);
	--faction-symbol: url(../../static/img/factions/empire-symbol.png);

	& .card-back {
		background-image: url(../../static/img/cards/empire-back.webp);
	}
}

.rebel {
	--color-scheme: rgb(150, 43, 43);
	--faction-symbol: url(../../static/img/factions/rebel-symbol.png);

	& .card-back {
		background-image: url(../../static/img/cards/rebel-back.webp);
	}
}

.republic {
	--color-scheme: rgb(50, 47, 201);
	--faction-symbol: url(../../static/img/factions/republic-symbol.png);

	& .card-back {
		background-image: url(../../static/img/cards/republic-back.webp);
	}
}

.separatist {
	--color-scheme: rgb(201, 112, 11);
	--faction-symbol: url(../../static/img/factions/separatist-symbol.png);

	& .card-back {
		background-image: url(../../static/img/cards/separatist-back.webp);
	}
}

.criminal {
	--color-scheme: rgb(35, 107, 21);
	--faction-symbol: url(../../static/img/factions/criminal-symbol.png);

	& .card-back {
		background-image: url(../../static/img/cards/criminal-back.webp);
	}
}

@keyframes flipping {
	0% {
		transform: rotateY(180deg);
	}

	100% {
		transform: rotateY(0deg);
	}
}
